# 寻找搭子 - Find Partner

一个基于React的智能社交应用，帮助用户找到活动伙伴，发布和浏览各种活动需求。采用现代化UI设计和智能匹配算法，提供完整的搭子社交体验。

## ✨ 核心特性

### 🤖 智能匹配系统
- **智能推荐**: 基于活动类型、时间、地点、描述的相似度算法
- **实时匹配**: 发布需求时自动寻找相似需求
- **匹配弹窗**: 直观展示匹配结果和相似度评分
- **一键添加**: 快速将匹配用户添加为搭子

### 🎯 完整功能模块
- **寻找搭子**: 发布活动需求，智能寻找伙伴
- **社区广场**: 浏览所有用户发布的活动需求
- **我的搭子**: 管理搭子请求和已接受的搭子
- **进行中**: 查看当前正在进行的搭子活动
- **历史记录**: 查看以往的搭子活动记录
- **地图定位**: 实时查看位置信息和活动地点

### 🔐 用户认证系统
- **用户注册**: 支持新用户注册，包含验证码验证
- **用户登录**: 支持用户名密码登录，记住用户名功能
- **安全验证**: 图形验证码防止恶意注册
- **数据持久化**: 本地存储用户数据和设置

### 💬 社交功能
- **实时聊天**: 与搭子进行即时消息交流
- **搭子管理**: 接受/拒绝搭子邀请，管理搭子关系
- **评分系统**: 对搭子进行多维度评分（体验、诚信度、沟通）
- **通知系统**: 实时通知重要事件和状态变化

## 🛠️ 技术栈

### 前端技术
- **框架**: React 19.1.1
- **样式**: CSS3 + 深色主题设计
- **图标**: Lucide React
- **构建工具**: Create React App
- **测试**: React Testing Library

### 架构设计
- **组件化**: 高度模块化的React组件设计
- **服务层**: 独立的API服务和业务逻辑层
- **工具函数**: 相似度匹配算法和通用工具
- **状态管理**: React Hooks + 本地存储持久化

## 📁 项目结构

```
src/
├── components/              # React组件库
│   ├── AuthPage.jsx         # 认证页面容器
│   ├── Login.jsx            # 登录组件
│   ├── Register.jsx         # 注册组件
│   ├── NewPartnerForm.jsx   # 新版搭子需求表单
│   ├── NewCommunityList.jsx # 新版社区需求列表
│   ├── Friends.jsx          # 搭子管理组件
│   ├── ChatBox.jsx          # 聊天功能组件
│   ├── TabSystem.jsx        # 选项卡系统
│   ├── MatchModal.jsx       # 智能匹配弹窗
│   ├── MapComponent.jsx     # 地图定位组件
│   ├── RatingModal.jsx      # 评分弹窗
│   ├── Notification.jsx     # 通知组件
│   ├── TechBackground.jsx   # 科技感背景
│   └── ...                  # 其他辅助组件
├── services/                # 服务层
│   ├── apiService.js        # API服务抽象层
│   └── notificationService.js # 通知服务
├── utils/                   # 工具函数
│   └── similarityMatcher.js # 智能匹配算法
├── App.js                   # 主应用组件
├── App.css                  # 主样式文件
└── index.js                 # 应用入口
```

## 🎨 界面设计

### 视觉特色
- **深色主题**: 采用现代化深色背景设计，护眼且科技感十足
- **响应式布局**: 完美支持桌面和移动端适配
- **模块化设计**: 六个主要功能模块清晰分离，操作直观
- **交互反馈**: 丰富的悬停效果、选中状态和动画提示
- **科技感元素**: 动态背景、渐变效果、现代化图标

### 用户体验
- **智能提示**: 实时表单验证和错误提示
- **状态管理**: 清晰的状态指示和进度反馈
- **快捷操作**: 一键添加搭子、快速聊天等便捷功能

## 🚀 快速开始

### 环境要求
- Node.js >= 14.0.0
- npm >= 6.0.0

### 安装依赖
```bash
npm install
```

## 🎯 运行模式

项目支持两种运行模式，您可以根据需要选择：

### 模式一：纯前端模式（推荐新手）
**特点：** 使用模拟数据，无需后端，适合快速体验和开发

```bash
# 1. 安装依赖
npm install

# 2. 启动前端应用
npm start
```

**访问地址：** [http://localhost:3000](http://localhost:3000)

**数据存储：** 浏览器localStorage（刷新页面数据保留）

**使用说明：**
- 直接访问应用，无需登录即可体验所有功能
- 所有数据都是模拟数据，用于演示
- 支持发布需求、浏览社区、添加搭子等完整流程

**适用场景：**
- 快速体验应用功能
- 前端开发和调试
- 演示和展示

---

### 模式二：前后端分离模式（推荐生产）
**特点：** 连接真实后端API，支持多用户，数据持久化

#### 步骤1：启动后端API
```bash
# 方式一：使用快速启动脚本（推荐）
chmod +x start-backend.sh
./start-backend.sh

# 方式二：手动启动
cd backend-example
npm install
npm start
```

**后端地址：** [http://localhost:3001](http://localhost:3001)

#### 步骤2：启动前端应用
```bash
# 在项目根目录
npm start
```

**前端地址：** [http://localhost:3000](http://localhost:3000)

#### 步骤3：配置API模式
1. 打开应用：[http://localhost:3000](http://localhost:3000)
2. 点击右上角"API配置"按钮
3. 勾选"使用真实API模式"
4. 确认API地址：`http://localhost:3001/api`
5. 点击"保存配置"
6. 页面自动刷新，开始使用真实API

#### 步骤4：注册和登录
**注册新用户：**
1. 点击"登录"按钮
2. 切换到"注册"标签
3. 填写用户名、邮箱、密码
4. 点击"注册"按钮
5. 注册成功后自动跳转到登录页面

**登录用户：**
1. 在登录页面输入用户名和密码
2. 点击"登录"按钮
3. 登录成功后可以看到用户信息

**测试账号：**
- 用户名：`demo_user`
- 密码：`password`

**适用场景：**
- 生产环境部署
- 多用户协作
- 数据持久化需求

---

## 🔧 故障排除

### 常见问题及解决方案

#### 1. 无法正常登录和注册
**问题原因：** 可能没有正确配置API模式或后端服务未启动

**解决方案：**
```bash
# 1. 确保后端服务正在运行
curl http://localhost:3001/api/health
# 应该返回：{"success":true,"message":"API服务正常运行"}

# 2. 检查前端是否正确配置了API模式
# 打开 http://localhost:3000
# 点击"API配置"按钮
# 确保勾选了"使用真实API模式"
# 确认API地址为：http://localhost:3001/api
```

#### 2. 端口冲突问题
**问题：** 3000或3001端口被占用

**解决方案：**
```bash
# 查看端口占用
lsof -i :3000
lsof -i :3001

# 杀死占用端口的进程
kill -9 <PID>

# 或者使用其他端口
PORT=3002 npm start  # 前端
PORT=3003 node server.js  # 后端
```

#### 3. 依赖安装失败
**解决方案：**
```bash
# 清理缓存重新安装
rm -rf node_modules package-lock.json
npm cache clean --force
npm install

# 后端依赖
cd backend-example
rm -rf node_modules package-lock.json
npm install
```

#### 4. 数据不显示或显示错误
**检查步骤：**
1. 确认API模式配置正确
2. 检查浏览器控制台是否有错误
3. 确认后端API返回数据格式正确
4. 尝试清除浏览器缓存和localStorage

#### 5. 注册时提示"请填写完整信息"
**解决方案：**
- 确保填写了用户名、邮箱、密码三个字段
- 邮箱格式要正确（包含@符号）
- 密码不能为空

### 调试模式
开启浏览器开发者工具，查看控制台输出：
- 网络请求是否成功
- API响应数据格式
- 错误信息和堆栈跟踪

---

## 🔧 其他命令

### 构建生产版本
```bash
npm run build
```

### 运行测试
```bash
npm test
```

### 检查API服务状态
```bash
# 检查后端API是否正常运行
curl http://localhost:3001/api/health
```

## 📱 使用指南

### 1. 用户注册/登录
- 首次使用需要注册账号
- 支持记住用户名功能
- 图形验证码确保安全性

### 2. 发布搭子需求
- 选择活动类型（学习、运动、游戏、美食等）
- 设置活动日期和时间
- 输入活动地点
- 填写期望参与人数
- 添加详细描述（可选）
- 系统自动进行智能匹配

### 3. 智能匹配体验
- 发布需求后自动搜索相似需求
- 查看匹配结果和相似度评分
- 选择直接添加为搭子或开始聊天
- 也可选择发布到社区广场

### 4. 社区广场浏览
- 查看所有用户发布的活动需求
- 按活动类型、时间等筛选
- 点击需求卡片查看详情
- 一键添加感兴趣的搭子

### 5. 搭子管理
- **待添加**: 管理收到的搭子邀请
- **已添加**: 查看已接受的搭子
- **进行中**: 查看当前正在进行的活动
- **历史记录**: 查看以往的搭子活动

### 6. 聊天交流
- 与搭子进行实时消息交流
- 查看活动详情和用户信息
- 支持表情和快捷回复

### 7. 地图定位
- 实时查看自己的位置
- 查看搭子的位置信息
- 查看活动地点的具体位置
- 支持位置导航功能

### 8. 评分系统
- 活动结束后对搭子进行评分
- 多维度评分：体验、诚信度、沟通能力
- 帮助其他用户了解搭子质量

### 9. API配置管理
- 点击"API配置"按钮进行设置
- 支持模拟数据和真实API模式切换
- 可配置API基础URL和超时时间
- 提供开发、测试、生产环境预设

## 🔧 技术实现

### 智能匹配算法
```javascript
// 相似度计算权重
- 活动类型: 40%
- 时间匹配: 30% 
- 地点相似: 20%
- 描述匹配: 10%
```

### 状态管理
- **全局状态**: 使用React Context和useState管理
- **数据持久化**: localStorage自动保存用户数据
- **状态同步**: 组件间通过props和回调函数通信

### 服务层架构
- **API服务**: 支持真实后端API和模拟数据切换
- **HTTP客户端**: 统一的HTTP请求封装，支持认证和错误处理
- **配置管理**: 灵活的API配置系统，支持多环境切换
- **通知服务**: 统一管理应用内通知
- **数据服务**: 处理数据存储和检索

## 📊 功能对比

| 功能模块 | 基础版本 | 当前版本 | 状态 |
|---------|---------|---------|------|
| 用户注册/登录 | ✅ | ✅ 增强 | 完成 |
| 发布需求 | ✅ | ✅ 智能匹配 | 完成 |
| 浏览需求 | ✅ | ✅ 社区广场 | 完成 |
| 聊天功能 | ✅ | ✅ 增强UI | 完成 |
| 搭子管理 | ✅ | ✅ 完整流程 | 完成 |
| 智能匹配 | ❌ | ✅ 算法实现 | 新增 |
| 地图定位 | ❌ | ✅ 实时定位 | 新增 |
| 评分系统 | ❌ | ✅ 多维度评分 | 新增 |
| 通知系统 | ❌ | ✅ 实时通知 | 新增 |
| 历史记录 | ❌ | ✅ 完整记录 | 新增 |

## 🎯 未来规划

### 即将实现
- [x] 后端API集成 (已支持，可配置切换)
- [ ] 实时消息推送
- [ ] 用户头像上传
- [ ] 活动照片分享
- [ ] 群组聊天功能

### 技术优化
- [x] 后端API集成架构 (已完成)
- [ ] 状态管理库集成（Redux Toolkit）
- [ ] 路由管理（React Router v6）
- [ ] 单元测试覆盖
- [ ] 性能优化和代码分割
- [ ] PWA支持

### 功能增强
- [ ] 活动分类和标签系统
- [ ] 推荐算法优化
- [ ] 社交网络功能
- [ ] 活动统计和分析
- [ ] 多语言支持

## 🔌 后端API集成

### 灵活的API架构
项目采用模块化的API服务架构，支持真实后端API和模拟数据的无缝切换：

#### 1. 双模式支持
- **模拟数据模式**: 使用localStorage存储，适合开发和演示
- **真实API模式**: 连接真实后端服务器，支持生产环境

#### 2. 配置管理
- 通过"API配置"按钮进行设置
- 支持多环境配置（开发、测试、生产）
- 可自定义API基础URL和超时时间

#### 3. 完整的API覆盖
- 用户认证（登录、注册、登出）
- 需求管理（CRUD操作、搜索、匹配）
- 搭子关系（邀请、接受、拒绝、移除）
- 聊天功能（消息发送、历史记录）
- 评分系统（提交、查询）
- 通知管理（列表、标记已读）
- 地图服务（位置更新、附近搜索）

#### 4. 后端集成指南
详细的后端API集成文档请参考：[BACKEND_API_GUIDE.md](./BACKEND_API_GUIDE.md)

包含：
- 完整的API端点规范
- 数据库设计建议
- 技术栈推荐
- 部署指南
- 安全考虑

## 🌟 项目亮点

1. **智能匹配**: 独创的相似度算法，精准匹配搭子
2. **完整生态**: 从发布到匹配到管理的完整流程
3. **现代UI**: 深色主题 + 科技感设计，用户体验优秀
4. **模块化架构**: 高度可维护和可扩展的代码结构
5. **灵活API**: 支持真实API和模拟数据无缝切换
6. **数据持久化**: 本地存储确保数据不丢失
7. **响应式设计**: 完美适配各种设备尺寸

## 📄 许可证

本项目采用 MIT 许可证。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

### 贡献指南
1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

---

**寻找搭子** - 让每一次活动都有伙伴相伴！🚀

> 一个集智能匹配、社交互动、地图定位于一体的现代化搭子平台
